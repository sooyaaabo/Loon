#!name = Spotify
#!desc = Spotifyè¿‡æ»¤å¹¿å‘Šï¼Œæ­Œè¯å¢å¼ºåŠåŒè¯­æ¨¡å—ï¼Œè§£é”éƒ¨åˆ†Premiumç‰¹æƒã€‚
#!openUrl = 
#!author = @app2smile @VirgilClyne @å¯è‰ğŸ…¥
#!homepage = https://github.com/sooyaaabo/Loon
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/Spotify.png
#!date = 2024-04-05 18:30

# 2023-10-04
# https://raw.githubusercontent.com/app2smile/rules/master/plugin/spotify.plugin
# 2024-03-14
# https://github.com/DualSubs/Spotify/blob/main/modules/DualSubs.Spotify.plugin
# 2024-02-20 11:11:20
# https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Spotify_lyrics_translation.plugin

[Script]
# Spotifyå»å¹¿å‘Š
http-request ^https:\/\/spclient\.wg\.spotify\.com\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/ script-path = https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js, timeout = 10, tag = JSONå¤„ç†
http-response ^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$ script-path = https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js, requires-body = true, binary-body-mode = true, timeout = 10, tag = Protoå¤„ç†

# Spotifyæ­Œè¯å¢å¼º
http-response ^https?:\/\/api\.spotify\.com\/v1\/tracks\? script-path = https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.response.js, requires-body = true, tag = è·Ÿè¸ªå“åº”Â·JSON
http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json script-path = https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.request.js, requires-body = true, tag = æ­Œè¯è¯·æ±‚Â·JSON
http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*) script-path = https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.request.js, requires-body = true, binary-body-mode = true, tag = æ­Œè¯è¯·æ±‚Â·Proto
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=Translate script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body = true, tag = ç¿»è¯‘æ­Œè¯å“åº”Â·JSON
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=Translate script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body = true, binary-body-mode = true, tag = ç¿»è¯‘æ­Œè¯å“åº”Â·Proto
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=External script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/External.Lyrics.response.js, requires-body = true, tag = å¤–éƒ¨æ­Œè¯å“åº”Â·JSON
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=External script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/External.Lyrics.response.js, requires-body = true, binary-body-mode = true, tag = å¤–éƒ¨æ­Œè¯å“åº”Â·Proto

[Mitm]
hostname = api.spotify.com, spclient.wg.spotify.com
