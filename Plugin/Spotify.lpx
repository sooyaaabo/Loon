#!name = Spotify
#!desc = è¿‡æ»¤Spotifyå¹¿å‘Šï¼Œä¿®æ”¹æ’ä»¶è‡ªå®šä¹‰é…ç½®é¡¹éœ€è¦é‡æ–°ç™»é™†æ–¹å¯ç”Ÿæ•ˆã€‚
#!openUrl = https://apps.apple.com/app/id324684580
#!author = 001ProMax[https://github.com/001ProMax], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/Spotify.png
#!date = 2025-12-16 20:00

# 2025-08-10
# https://github.com/001ProMax/Surge/blob/main/Loon/Spotify.plugin
# 2025-08-10 15:30:17
# https://kelee.one/Tool/Loon/Lpx/Spotify_remove_ads.lpx

[Argument]
tab = switch, false, true, tag = ç§»é™¤åº•æ åˆ›å»ºæŒ‰é’®, desc = æ­¤å¼€å…³æ§åˆ¶æ˜¯å¦ç§»é™¤åº•æ åˆ›å»ºæŒ‰é’®
useractivity = switch, true, false, tag = å¯ç”¨Appleè®¾å¤‡æ¥åŠ›, desc = æ­¤å¼€å…³æ§åˆ¶æ˜¯å¦ä½¿ç”¨Appleè®¾å¤‡æ¥åŠ›

[Rewrite]
# æ’­æ”¾å¹¿å‘Š
^https:\/\/(?:\w+-spclient|spclient\.wg)\.spotify\.com(?::443)?\/pendragon\/ reject-dict

# æ¢å¤æ­Œæ‰‹å’Œä¸“è¾‘åˆ—è¡¨çš„æ­£å¸¸å±•ç¤º
^https:\/\/(?:\w+-spclient|spclient\.wg)\.spotify\.com(?::443)?\/artistview\/v1\/artist\/(.*)&platform=iphone header https://spclient.wg.spotify.com/artistview/v1/artist/$1&platform=ipad

[Script]
http-response ^https:\/\/(?:\w+-spclient|spclient\.wg)\.spotify\.com(?::443)?\/(?:bootstrap|user-customization-service) script-path = https://raw.githubusercontent.com/001ProMax/Surge/main/Script/Spotify.Crack.Dev.js, requires-body = true, binary-body-mode = true, timeout = 5, tag = [Spotify]Protobuf, argument = [{tab},{useractivity}]

[MitM]
hostname = *-spclient.spotify.com, spclient.wg.spotify.com