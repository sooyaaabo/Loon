#!name = çŸ¥ä¹
#!desc = è¿‡æ»¤çŸ¥ä¹å¹¿å‘Šï¼Œå»ºè®®å¸è½½çŸ¥ä¹é‡æ–°å®‰è£…ã€‚
#!openUrl = https://apps.apple.com/app/id432274380
#!author = RuCu6[https://github.com/RuCu6], app2smile[https://github.com/app2smile], blackmatrix7[https://github.com/blackmatrix7], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/Zhihu.png
#!date = 2025-12-16 20:00

# 2025-09-30 05:09:40
# https://kelee.one/Tool/Loon/Lpx/Zhihu_remove_ads.lpx

[Rule]
DOMAIN, appcloud.zhihu.com, REJECT
DOMAIN, appcloud2.in.zhihu.com, REJECT
DOMAIN, crash2.zhihu.com, REJECT
DOMAIN, mqtt.zhihu.com, REJECT
DOMAIN, sugar.zhihu.com, REJECT
DOMAIN, zxid-m.mobileservice.cn, REJECT
IP-CIDR, 103.41.167.237/32, REJECT, no-resolve
IP-CIDR, 118.89.204.198/32, REJECT, no-resolve
IP-CIDR, 182.61.194.7/32, REJECT, no-resolve
IP-CIDR6, 2402:4e00:1200:ed00:0:9089:6dac:96b6/128, REJECT, no-resolve

[Rewrite]
# é¦–é¡µ - æ‚¬æµ®å›¾æ ‡ã€é¡¶éƒ¨æ¨ªå¹…ã€å¼€å±å¹¿å‘Šã€å…³æ³¨é¡µæ¨èã€æ¨èä¿¡æ¯æµã€çƒ­æ¦œä¿¡æ¯æµã€çƒ­æ¦œç›´æ’­ã€å›ç­”åº•éƒ¨å¡ç‰‡
^https:\/\/api\.zhihu\.com\/commercial_api\/ reject-dict
^https:\/\/api\.zhihu\.com\/content-distribution-core\/bubble\/common\/settings reject-dict
^https:\/\/api\.zhihu\.com\/(?:moments\/lastread|drama\/hot-drama-list) reject-dict
^https:\/\/api\.zhihu\.com\/root\/window reject-dict

# ä¼šå‘˜é¡µé¢ - å¼¹çª—ã€æ‚¬æµ®åŠ¨å›¾
^https:\/\/api\.zhihu\.com\/(?:bazaar\/float_window|market\/popovers_v2) reject-dict
^https:\/\/api\.zhihu\.com\/bazaar\/vip_tab\/header\? response-body-json-del activity_banner activity_window vip_tip

# æˆ‘çš„é¡µé¢ - é¡¹ç›®åˆ—è¡¨ã€ä¼šå‘˜å¡ç‰‡
^https:\/\/api\.zhihu\.com\/me\/guides reject-dict
^https:\/\/api\.zhihu\.com\/people\/homepage_entry_v2 reject-dict
^https:\/\/api\.zhihu\.com\/unlimited\/go\/my_card reject
^https:\/\/www\.zhihu\.com\/appview\/v3\/zhmore reject

# æœç´¢é¡µ - å…³é”®è¯ã€çŒœä½ æƒ³æœ
^https:\/\/api\.zhihu\.com\/search\/(hot_search|preset_words) reject-dict
^https:\/\/api\.zhihu\.com\/search\/recommend_query\/v2\? response-body-replace-regex "recommend_queries":\{.+\} "recommend_queries":{}
^https:\/\/www\.zhihu\.com\/api\/v4\/search\/related_queries\/(?:article|answer)\/\d+ reject-dict

# å›ç­”è¯¦æƒ…é¡µ - è¯„è®ºåŒºé¡¶éƒ¨ã€ä¸‹ä¸€ä¸ªå›ç­”
^https:\/\/api\.zhihu\.com\/comment_v5\/(?:articles|answers)\/\d+\/list-headers reject-dict
^https:\/\/api\.zhihu\.com\/prague\/related_suggestion_native\/feed\? reject-dict
^https:\/\/api\.zhihu\.com\/v5\.1\/topics\/answer\/\d+\/relation reject-dict
^https:\/\/api\.zhihu\.com\/questions\/\d+(?:\/answers|\/feeds|\?include=) response-body-json-jq 'del(.ad_info, .data.ad_info?, .query_info) | if (.data | type) == "array" then .data |= map(select(.target?.answer_type? // "" | tostring | contains("paid") | not)) else . end'

# å…¶ä»– - æœåŠ¡å™¨æ¨é€é…ç½®
^https:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config reject-dict
^https:\/\/api\.zhihu\.com\/ad-style-service\/request reject-dict
^https:\/\/appcloud2\.zhihu\.com\/v3\/resource\?group_name=mp reject-dict
^https:\/\/link\.zhihu\.com\/\?target=(?:https?)?(?:%3A|:)?(?:\/\/|%2F%2F)?(.*) 302 http://$1

# ç½‘é¡µç‰ˆå»å¹¿å‘Š //www.zhihu.com, zhuanlan.zhihu.com
^https:\/\/api\.zhihu\.com\/distribute\/rhea\/qa_ad_card\/h5\/recommendation\? reject-dict
^https:\/\/www\.zhihu\.com\/api\/v4\/hot_recommendation reject-dict
^https:\/\/www\.zhihu\.com\/api\/v4\/mcn\/v2\/linkcards\? reject-dict
^https:\/\/www\.zhihu\.com\/api\/v4/(?:answers|questions)\/\d+/related-readings reject-dict
^https:\/\/www\.zhihu\.com\/commercial_api\/banners_v3\/mobile_banner reject-dict
^https:\/\/zhuanlan\.zhihu\.com\/api\/articles\/\d+\/recommendation reject-dict

[Script]
# é¦–é¡µ - æ‚¬æµ®å›¾æ ‡ã€é¡¶éƒ¨æ¨ªå¹…ã€å¼€å±å¹¿å‘Šã€å…³æ³¨é¡µæ¨èã€æ¨èä¿¡æ¯æµã€çƒ­æ¦œä¿¡æ¯æµã€çƒ­æ¦œç›´æ’­ã€å›ç­”åº•éƒ¨å¡ç‰‡ã€ç²¾ç®€é¡¶éƒ¨æ ‡ç­¾
http-response ^https:\/\/(?:api|page-info)\.zhihu\.com\/(?:answers|articles)\/v2\/\d+ script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤å›ç­”åº•éƒ¨å¡ç‰‡æ¨å¹¿
http-response ^https:\/\/api\.zhihu\.com\/commercial_api\/app_float_layer script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤é¦–é¡µæ‚¬æµ®å›¾æ ‡
http-response ^https:\/\/api\.zhihu\.com\/feed\/render\/tab\/config\? script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤æ¨èä¿¡æ¯æµæ¨å¹¿
http-response ^https:\/\/api\.zhihu\.com\/(?:moments_v3|topstory\/hot-lists\/total|topstory\/recommend) script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤æ¨èä¿¡æ¯æµæ¨å¹¿
http-response ^https:\/\/api\.zhihu\.com\/root\/tab script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç²¾ç®€é¡¶éƒ¨æ ‡ç­¾
http-response ^https:\/\/api\.zhihu\.com\/v2\/topstory\/hot-lists\/everyone-seeing\? script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤çƒ­æ¦œä¿¡æ¯æµæ¨å¹¿

# å›ç­”è¯¦æƒ…é¡µ - è¯„è®ºåŒºé¡¶éƒ¨ã€ä¸‹ä¸€ä¸ªå›ç­”
http-response ^https:\/\/api\.zhihu\.com\/next-(?:bff|data|render) script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤ä¸‹ä¸€ä¸ªå›ç­”æ¨å¹¿ã€è¯„è®ºåŒºé¡¶éƒ¨æ¨å¹¿
# http-response ^https:\/\/api\.zhihu\.com\/questions\/\d+(?:\/answers|\/feeds|\?include=) script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤å›ç­”è¯¦æƒ…é¡µæ¨å¹¿
http-response ^https:\/\/www\.zhihu\.com\/api\/v4\/(?:articles|answers)\/\d+\/recommendations?\? script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]ç§»é™¤å›ç­”è¯¦æƒ…é¡µæ¨å¹¿

# å…¶ä»– - æœåŠ¡å™¨æ¨é€é…ç½®
http-response ^https:\/\/appcloud2\.zhihu\.com\/v3\/config script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]æ‹¦æˆªæœåŠ¡å™¨æ¨é€é…ç½® config
http-response ^https:\/\/m-cloud\.zhihu\.com\/api\/cloud\/zhihu\/config\/all\? script-path = https://kelee.one/Resource/JavaScript/Zhihu/Zhihu_remove_ads.js, requires-body = true, tag = [çŸ¥ä¹]æ‹¦æˆªæœåŠ¡å™¨æ¨é€é…ç½® config all

[MitM]
hostname = *.zhihu.com