#!name = é¦™æ¸¯æŠ–éŸ³
#!desc = è¿‡æ»¤é¦™æ¸¯æŠ–éŸ³å¹¿å‘Š
#!openUrl = https://apps.apple.com/app/id1142110895
#!author = å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/TikTok-01.png
#!date = 2025-12-16 20:00

# 2025-05-13 15:17:08
# https://kelee.one/Tool/Loon/Lpx/HKDouYin_remove_ads.lpx

[Rule]
# å¼€å±å¹¿å‘Š
AND, ((IP-CIDR, 101.126.58.201/32, no-resolve), (DEST-PORT, 6443)), REJECT
AND, ((IP-CIDR, 110.249.199.75/32, no-resolve), (DEST-PORT, 6443)), REJECT
AND, ((IP-CIDR, 111.225.147.191/32, no-resolve), (DEST-PORT, 6443)), REJECT
AND, ((IP-CIDR, 111.63.61.101/32, no-resolve), (DEST-PORT, 6443)), REJECT
AND, ((IP-CIDR, 220.243.141.0/32, no-resolve), (DEST-PORT, 6443)), REJECT

# æ‹¦æˆªPCDN
AND, ((OR, ((DOMAIN-SUFFIX, bytegecko.com), (DOMAIN-SUFFIX, byteeffecttos.com))), (DOMAIN-KEYWORD, ncdn)), REJECT

[Rewrite]
# å¹¿å‘Šä¸‹å‘
^https:\/\/api5-normal-lq\.amemv\.com\/api\/ad\/ reject
^https:\/\/(aweme\.snssdk\.com|api5-normal-m\.amemv\.com)\/api\/ad\/ reject
^https:\/\/zlink\.ugsdk\.cn\/ad\/ reject

# å·¦ä¾§è¾¹æ  - å¸¸ç”¨å°ç¨‹åºã€å¸¸è®¿é—®çš„äºº
^https:\/\/((aweme\.snssdk\.com|api5-normal-m\.amemv\.com)|api5-normal-m\.amemv\.com)\/aweme\/homepage\/sidebar_data\/\? response-body-json-del data_map.recently_apps data_map.recently_users

# åº•æ çš®è‚¤
# ^https:\/\/aweme\.snssdk\.com\/service\/settings\/v3\/\?need_personal_recommend response-body-json-del data.key_vids_mp.tab_bar_background_use_server_time data.key_vids_mp.dynamic_plus_icon_config data.key_vids_mp.tabbar_config data.key_vids_mp.homepage_two_session_tab_skin_2025 data.key_vids_mp.homepage_tab_skin_enable

# åº•æ åˆ‡æ¢
^https:\/\/(aweme\.snssdk\.com|api5-normal-m\.amemv\.com)\/aweme\/homepage\/render\/\? response-body-json-del data.tab_config

# å·¦ä¾§è¾¹æ ã€é¦–é¡µé¡¶éƒ¨æ ‡ç­¾
^https:\/\/(aweme\.snssdk\.com|api5-normal-m\.amemv\.com)\/aweme\/homepage\/render\/\? response-body-json-jq '.data.tab_list[]? |= (if .extra.side_bar.modules != null then .extra.side_bar.modules[]?.items[]? |= (if .data.first_page_module?.module_title == "å¸¸ç”¨åŠŸèƒ½" then .data = {} else . end) else . end) | .data.tab_list |= map(if .extra.tab_list != null then .extra.tab_list |= map(select(.tab_id | IN("homepage_tablive", "homepage_follow", "homepage_hot_container"))) else . end) | .data.tab_list |= map(select(.extra.tab_list != null and (.extra.tab_list | length > 0)))'

# åº•æ çš®è‚¤
^https:\/\/(aweme\.snssdk\.com|api5-normal-m\.amemv\.com)\/tfe\/api\/request_combine\/v1\/\?need_personal_recommend response-body-json-replace data["/service/settings/v3/"].body.data.settings.homepage_two_session_tab_skin_2025 false data["/service/settings/v3/"].body.data.settings.homepage_tab_skin_enable false

[MitM]
hostname = aweme.snssdk.com, api5-normal-m.amemv.com