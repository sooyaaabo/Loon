#!name = ä»€ä¹ˆå€¼å¾—ä¹°
#!desc = è¿‡æ»¤ä»€ä¹ˆå€¼å¾—ä¹°å¹¿å‘Š
#!openUrl = https://apps.apple.com/app/id518213356
#!author = ZenmoFeiShi[https://github.com/ZenmoFeiShi], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/Zhidemai.png
#!date = 2025-12-16 20:00

# 2024-02-11 01:02
# https://raw.githubusercontent.com/ZenmoFeiShi/Qx/main/Smzdm.snippet
# 2025-11-27 21:44:57
# https://kelee.one/Tool/Loon/Lpx/smzdm_remove_ads.lpx

[Rule]
# å¹¿å‘Šä¸‹å‘
DOMAIN, adx-api.zdmimg.com, REJECT

[Rewrite]
# å¼€å±å¹¿å‘Š
^https:\/\/app-api\.smzdm\.com\/util\/loading\? reject-dict

# åœç”¨é™é»˜æ¨é€å¹¿å‘Šã€ç¦æ­¢é€šè¿‡ç™¾å·SDKè·³è½¬åˆ°å¹¿å‘Šé¡µé¢
^https:\/\/app-api\.smzdm\.com\/util\/update$ response-body-json-replace data.silence_local_push 0 data.baichuan_redirect_switch 0

# åˆ é™¤é™é»˜æ¨é€çš„å¹¿å‘Šæ–‡æ¡ˆã€è§†é¢‘ç¼“å­˜å¹¿å‘Šé…ç½®ã€å¥½ä»·åˆ—è¡¨å³ä¸‹è§’æ‚¬æµ®å¹¿å‘Šã€é¦–é¡µå³ä¸‹è§’æ‚¬æµ®éƒ¨ä»¶ã€ç¤¾åŒºå¼¹çª—
^https:\/\/app-api\.smzdm\.com\/util\/update$ response-body-json-del data.silence_local_push_msg data.video_cache_num_configs data.haojia_widget data.widget data.operation_float

# å¼¹çª—å¹¿å‘Š
^https:\/\/app-api\.smzdm\.com\/util\/update$ response-body-json-jq 'def r: if type=="object" then if has("ad_campaign_name") and (.ad_campaign_name|type=="string") and (.ad_campaign_name|test("\\S")) then empty else . end elif type=="array" then map(r) else . end; .data.operation_float |= map(map(r))'

# é¦–é¡µ - ä¿¡æ¯æµå¹¿å‘Šã€æ¨ªå¹…
# å¦‚æœ`data.rows[*].cell_type`çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„`39001`ï¼Œåˆ™ä¿ç•™ä»–ä»¬ï¼Œå¹¶åˆ é™¤å…¶ä»–`data.rows[*]`ä¸‹çš„å¯¹è±¡
# å¦‚æœ`data.banner_v2[*].cell_type`çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„`21028`ï¼Œåˆ™ä¿ç•™ä»–ä»¬ï¼Œå¹¶åˆ é™¤å…¶ä»–`data.banner_v2[*]`ä¸‹çš„å¯¹è±¡
^https:\/\/homepage-api\.smzdm\.com\/v3\/home\? response-body-json-jq jq-path="https://kelee.one/Resource/JQLang/smzdm/home_smzdm_remove_ads.jq"

# é¦–é¡µ - é¡¶éƒ¨é¢‘é“
^https:\/\/app-api\.smzdm\.com\/mychannel\/list$ reject-dict

# å¥½ä»· - ä»Šæ—¥å¥½åˆ¸
^https:\/\/h5\.smzdm\.com\/user\/coupon\/coupon_list\? reject

# å¥½ä»· - é¡¶éƒ¨ä¸»é¢˜çš®è‚¤
^https:\/\/haojia-api\.smzdm\.com\/home\/list\? response-body-json-del data.header_operation.theme

# å¥½ä»· - åˆ—è¡¨ - çº¢åŒ…æ¨å¹¿ã€å¹¿å‘Šæ¨ªå¹…
^https:\/\/haojia-api\.smzdm\.com\/home\/list\? response-body-json-jq '.data.rows |= map(select(.cell_type == "39001")) | .data.banner_v2 |= map(select(.cell_type == "21028"))'

# å¥½ä»· - è¯¦æƒ… - ä¼˜æƒ åˆ¸
^https:\/\/haojia\.m\.smzdm\.com\/detail_modul\/user_related_modul\? response-body-json-del data.super_coupon

# å¥½ä»· - è¯¦æƒ… - æ¨ªå¹…
^https:\/\/haojia\.m\.smzdm\.com\/detail_modul\/other_modul\? response-body-json-del data.banner

# æˆ‘çš„ - æ´»åŠ¨å…¥å£ã€æ¨ªå¹…
^https:\/\/user-api\.smzdm\.com\/vip$ response-body-json-del data.activity_entrance_info data.big_banner data.top_banner data.banner_switch data.yaoqingshaiwu

# æˆ‘çš„ - æœåŠ¡å¡ç‰‡
^https:\/\/user-api\.smzdm\.com\/vip\/bottom_card_list\? reject-dict

# æ°”æ³¡æç¤º
^https:\/\/article-api\.smzdm\.com\/publish\/get_bubble\? reject-dict

# æœç´¢ - å¡«å……è¯
^https:\/\/s-api\.smzdm\.com\/sou\/search_default_keyword\? reject-dict

# æœç´¢ç»“æœ - ä¿¡æ¯æµå¹¿å‘Šã€ç½®é¡¶å¹¿å‘Š 
^https:\/\/s-api\.smzdm\.com\/sou\/list_v10\? response-body-json-jq '.data.rows |= map(select(.model_type != "ads")) | .data.top_aladdin |= map(select(has("ad") | not))'

# æœç´¢é¡µé¢ - æœç´¢å‘ç°ã€æ¨å¹¿æ¨ªå¹…ã€çº¢åŒ…æ¨ªå¹…
^https:\/\/s-api\.smzdm\.com\/sou\/filter\/tags\/hot_tags\? response-body-json-del data.search_faxian data.tonglan data.hongbao

# æœç´¢é¡µé¢ - æ¦œå•å¹¿å‘Š
^https:\/\/s-api\.smzdm\.com\/sou\/filter\/tags\/hot_tags\? response-body-json-jq '.data.search_hot.home |= map(select(.article_tag.article_title != "å¹¿å‘Š")) | .data.search_hot.home |= map(select(has("pos")))'

# æœç´¢ - å¼¹çª—
^https:\/\/s-api\.smzdm\.com\/sou\/popup_coupon\? reject-dict

# å¥½ä»· - å•†å“åˆ—è¡¨çš„ä¼˜æƒ åˆ¸è¦†ç›–
^https:\/\/haojia-api\.smzdm\.com\/detail\/\d+\? response-body-json-del data.quan_log
^https:\/\/haojia-cdn\.smzdm\.com\/preload\/\d+\/fiphone\/v\d+_\d+_\d+\/wx\d+\/im\d+\/[0-9a-z]+\/[0-9a-z]+\.json$ response-body-json-del data.quan_log

# æ–‡ç« å†…å¹¿å‘Š
^https:\/\/post\.m\.smzdm\.com\/ajax_app\/ajax_get_footer_list\? response-body-json-del data.tuiguang_ad data.activity_banner

[MitM]
hostname = app-api.smzdm.com, homepage-api.smzdm.com, h5.smzdm.com, haojia-api.smzdm.com, haojia.m.smzdm.com, user-api.smzdm.com, article-api.smzdm.com, s-api.smzdm.com, haojia-cdn.smzdm.com, post.m.smzdm.com