#!name = å¾®åš
#!desc = å¾®åšå…¨é¢å‡€åŒ–
#!openUrl = https://apps.apple.com/app/id350962117
#!author = RuCu6[https://github.com/RuCu6], zmqcherish[https://github.com/zmqcherish]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.2.1(734)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/Weibo.png
#!date = 2024-08-19 00:00

# 2024-08-18 08:10
# https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/weibo.snippet

[Argument]
cookieScriptEnable = switch, true, tag = å¾®åšæ¯æ—¥ç­¾åˆ°ğŸ…’
cron = input, "0 3 0 * * *", tag = å¾®åšæ¯æ—¥ç­¾åˆ°ğŸ…£, desc = å¾®åšæ¯æ—¥ç­¾åˆ°ğŸ…£

[Rule]
# è¯·æ±‚æ”¾è¡Œ
DOMAIN, wbapp.uve.weibo.com, DIRECT
# è¯·æ±‚æ‹¦æˆª - å¾®åšå¼€å±å¹¿å‘Š
DOMAIN-SUFFIX, biz.weibo.com, REJECT

[Rewrite]
# é¦–é¡µ - ç­¾åˆ°ã€å‘å¸ƒæŒ‰é’®ã€ä¾§è¾¹æ ã€å³ä¸Šè§’çº¢åŒ…ã€é¡¶éƒ¨æ ‡ç­¾é¡µã€ä¾§è¾¹æ æé†’ã€è¶…è¯æ ‡ç­¾é¡µæ‚¬æµ®ã€é¡¶éƒ¨ç›´æ’­
^https:\/\/api\.weibo\.cn\/2\/(ug\/checkin\/list|push\/daily)\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/live\/media_homelist\? reject-dict
# è¯¦æƒ…é¡µ - è¶…è¯ã€è¯„è®ºåŒºã€çœ‹å›¾ç•Œé¢ã€ä¸ªäººä¸»é¡µã€æˆ‘çš„é¡µé¢ã€ä¿¡æ¯æµã€å•†å“æ©±çª—ã€è§†é¢‘æµã€è§†é¢‘å·ã€è§†é¢‘è°ƒæŸ¥ã€è¯é¢˜å¡ç‰‡
^https:\/\/api\.weibo\.cn\/2\/comments\/bullet_screens\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/photo\/info\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/statuses\/(container_positive|push_info)\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/vote\/get_vote_detail\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/chaohua\/discovery\/home_bottom\/switch\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/huati\/(discovery_home_bottom_getdotinfo|mobile_discovery_searchchange)\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/wbox\/\w+\/(home_bottom_modal|interest_category)\? reject-dict
# å‘ç°é¡µ - çƒ­é—¨å¾®åšä¿¡æ¯æµã€æœç´¢åˆ—è¡¨ã€çƒ­æœæé†’ã€çŒœä½ æƒ³æœã€è§†é¢‘æµçº¢åŒ…
^https:\/\/api\.weibo\.cn\/2\/search\/container_discover\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/hot\/hours_spotlight\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/video\/redpacket\? reject-dict
^https:\/\/api\.weibo\.cn\/!\/sug\/list\/finderchange\? reject-dict
# å¼€å±å¹¿å‘Š
^https:\/\/bootrealtime\.uve\.weibo\.com\/v[23]\/ad\/realtime reject-dict
^https:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/(get-lbs-cell-info\.php|sdkconfig\.php) reject
# å¾®åšé•¿æ–‡ç« æ¨å¹¿
^https:\/\/card\.weibo\.com\/article\/m\/aj\/(reward|uvead)\? reject-dict
^https:\/\/weibo\.com\/ttarticle\/x\/m\/aj\/(reward|uvead)\? reject-dict

[Script]
# å¾®åšæ¯æ—¥ç­¾åˆ°è·å–Cookieå’Œå®šæ—¶ä»»åŠ¡
http-request ^https?:\/\/api\.weibo\.cn\/\d\/users\/show script-path = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Script/WeiboCookieTask.js, timeout = 60, enable = {cookieScriptEnable}, tag = å¾®åšæ¯æ—¥ç­¾åˆ°ğŸ…’
cron {cron} script-path = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Script/WeiboCookieTask.js, timeout = 60, enable=true, tag = å¾®åšæ¯æ—¥ç­¾åˆ°ğŸ…£


# é¦–é¡µ - ç­¾åˆ°ã€å‘å¸ƒæŒ‰é’®ã€ä¾§è¾¹æ ã€å³ä¸Šè§’çº¢åŒ…ã€é¡¶éƒ¨æ ‡ç­¾é¡µã€ä¾§è¾¹æ æé†’ã€è¶…è¯æ ‡ç­¾é¡µæ‚¬æµ®ã€é¡¶éƒ¨ç›´æ’­
http-response ^https:\/\/api\.weibo\.cn\/2\/(checkin\/show|client\/publisher_list|push\/active)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = é¦–é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/groups\/allgroups\/v2\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = é¦–é¡µ
# è¯¦æƒ…é¡µ - è¶…è¯ã€è¯„è®ºåŒºã€çœ‹å›¾ç•Œé¢ã€ä¸ªäººä¸»é¡µã€æˆ‘çš„é¡µé¢ã€ä¿¡æ¯æµã€å•†å“æ©±çª—ã€è§†é¢‘æµã€è§†é¢‘å·ã€è§†é¢‘è°ƒæŸ¥ã€è¯é¢˜å¡ç‰‡
http-response ^https:\/\/api\.weibo\.cn\/2\/(cardlist|page)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/comments\/build_comments\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/(container\/asyn|flowlist|flowpage)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/friendships\/(create|destroy)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/profile\/(container_timeline|dealatt|me|statuses\/tab|userinfo)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/statuses\/(container_timeline(_hot|_topic|_topicpage|_unread)?|unread_hot_timeline)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/statuses\/(extend|show)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/video\/tiny_stream_video_list\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/!\/huati\/discovery_home_bottom_channels\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = è¯¦æƒ…é¡µ
# æ¶ˆæ¯é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/direct_messages\/user_list\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = æ¶ˆæ¯é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/messageflow\/notice\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = æ¶ˆæ¯é¡µ
# å‘ç°é¡µ - çƒ­é—¨å¾®åšä¿¡æ¯æµã€æœç´¢åˆ—è¡¨ã€çƒ­æœæé†’ã€çŒœä½ æƒ³æœã€è§†é¢‘æµçº¢åŒ…
http-response ^https:\/\/api\.weibo\.cn\/2\/search\/(container_timeline|finder)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = å‘ç°é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/searchall\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = å‘ç°é¡µ
# å¼€å±å¹¿å‘Š
http-response ^https:\/\/bootpreload\.uve\.weibo\.com\/v[12]\/ad\/preload script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = å¼€å±å¹¿å‘Š
http-response ^https:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/sdkad\.php script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = å¼€å±å¹¿å‘Š
http-response ^https:\/\/wbapp\.uve\.weibo\.com\/(preload\/get_ad|wbapplua\/wbpullad\.lua)\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = å¼€å±å¹¿å‘Š
# ä¼šå‘˜å›¾æ ‡
http-response ^https:\/\/new\.vip\.weibo\.cn\/aj\/appicon\/list\? script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/weibo.js, requires-body = true, tag = ä¼šå‘˜å›¾æ ‡

[Mitm]
hostname = *.weibo.cn, *.weibo.com, weibo.com
