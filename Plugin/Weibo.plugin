#!name = å¾®åš
#!desc = å¾®åšå…¨é¢å‡€åŒ–
#!openUrl = https://apps.apple.com/app/id350962117
#!author = RuCu6[https://github.com/RuCu6], fmz200[https://github.com/fmz200], zmqcherish[https://github.com/zmqcherish], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.2.4(787)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App/Weibo.png
#!date = 2024-12-17 11:30

# 2024-12-11 17:30:36
# https://kelee.one/Tool/Loon/Plugin/Weibo_remove_ads.plugin

[Rule]
# è¯·æ±‚æ”¾è¡Œ
DOMAIN, wbapp.uve.weibo.com, DIRECT

# å¾®åšå¼€å±å¹¿å‘Š
DOMAIN, bootpreload.uve.weibo.com, REJECT
DOMAIN-SUFFIX, biz.weibo.com, REJECT

# å…¶ä»–å¹¿å‘Š
DOMAIN, dns.weibo.cn, REJECT
DOMAIN, huodong.weibo.cn, REJECT
DOMAIN, f.video.weibocdn.com, REJECT
DOMAIN-SUFFIX, fastimage.uve.weibo.com, REJECT
DOMAIN-SUFFIX, adimg.vue.weibo.com, REJECT
DOMAIN-SUFFIX, zymo.mps.weibo.com, REJECT
DOMAIN-SUFFIX, weibomingzi.com, REJECT
DOMAIN-SUFFIX, sdkapp.uve.weibo.com, REJECT
DOMAIN-SUFFIX, promote.biz.weibo.cn, REJECT
DOMAIN-SUFFIX, gw5.push.mcp.weibo.cn, REJECT
DOMAIN-SUFFIX, gw6.push.mcp.weibo.cn, REJECT
DOMAIN-SUFFIX, game.weibo.cn, REJECT
DOMAIN-SUFFIX, adimg.uve.weibo.com, REJECT
DOMAIN-SUFFIX, game.weibo.com, REJECT
DOMAIN-SUFFIX, ads.viber.com, REJECT
DOMAIN-SUFFIX, ads-d.viber.com, REJECT
DOMAIN-SUFFIX, ads.aws.viber.com, REJECT
DOMAIN-SUFFIX, alitui.weibo.com, REJECT
DOMAIN-SUFFIX, dp.im.weibo.cn, REJECT
DOMAIN-SUFFIX, biz.weibo.com.cn, REJECT
DOMAIN-SUFFIX, biz.weibo.com, REJECT
DOMAIN-SUFFIX, click.uve.weibo.com, REJECT
DOMAIN-SUFFIX, wax.weibo.com, REJECT
DOMAIN-SUFFIX, wbapp.uve.weibo.com, REJECT
DOMAIN-SUFFIX, widget.weibo.com, REJECT
DOMAIN-SUFFIX, dsp.edm.weibo.cn, REJECT
DOMAIN-SUFFIX, alitui.weibo.com.cn, REJECT
DOMAIN-SUFFIX, tui.weibo.com, REJECT
DOMAIN-SUFFIX, wax.weibo.com.cn, REJECT
DOMAIN-SUFFIX, ad.weibo.com, REJECT
IP-CIDR, 39.97.130.51/32, REJECT, no-resolve
IP-CIDR, 39.97.128.148/32, REJECT, no-resolve

# å±è”½ä¿¡æ¯æ”¶é›†
DOMAIN, datacollection.uve.weibo.com, REJECT
DOMAIN, adpinpai.video.weibocdn.com, REJECT

# æ”¶é›†ç”¨æˆ·ä¿¡æ¯ï¼Œä¸Šä¼ ç”¨æˆ·æ—¥å¿—çš„è¯·æ±‚
URL-REGEX, "^http:\/\/api\.weibo\.cn\/2\/httpdns\/config", REJECT
URL-REGEX, "^http:\/\/api\.weibo\.cn\/httpdns\/config", REJECT
URL-REGEX, "^https?:\/\/api\.weibo\.cn\/2\/(push\/active|client\/addlog_batch|ad\/preload)", REJECT-DROP
URL-REGEX, "^https?:\/\/api-cloudim\.api\.weibo\.com\/v1\/log\/", REJECT-DROP

[Rewrite]
# é¦–é¡µ - ç­¾åˆ°ã€å‘å¸ƒæŒ‰é’®ã€ä¾§è¾¹æ ã€å³ä¸Šè§’çº¢åŒ…ã€é¡¶éƒ¨æ ‡ç­¾é¡µã€ä¾§è¾¹æ æé†’ã€è¶…è¯æ ‡ç­¾é¡µæ‚¬æµ®ã€é¡¶éƒ¨ç›´æ’­
^https:\/\/api\.weibo\.cn\/2\/(?:ug\/checkin\/list|push\/daily) reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/live\/media_homelist\? reject-dict

# è¯¦æƒ…é¡µ - è¶…è¯ã€è¯„è®ºåŒºã€çœ‹å›¾ç•Œé¢ã€ä¸ªäººä¸»é¡µã€æˆ‘çš„é¡µé¢ã€ä¿¡æ¯æµã€å•†å“æ©±çª—ã€è§†é¢‘æµã€è§†é¢‘å·ã€è§†é¢‘è°ƒæŸ¥ã€è¯é¢˜å¡ç‰‡
^https:\/\/api\.weibo\.cn\/2\/comments\/bullet_screens\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/photo\/info\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/statuses\/(?:container_positive|push_info) reject-dict
^https:\/\/api\.weibo\.cn\/2\/vote\/get_vote_detail\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/chaohua\/discovery\/home_bottom\/switch\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/huati\/(?:discovery_home_bottom_getdotinfo|mobile_discovery_searchchange) reject-dict
^https:\/\/api\.weibo\.cn\/2\/!\/wbox\/\w+\/(?:home_bottom_modal|interest_category) reject-dict

# å‘ç°é¡µ - çƒ­é—¨å¾®åšä¿¡æ¯æµã€æœç´¢åˆ—è¡¨ã€çƒ­æœæé†’ã€çŒœä½ æƒ³æœã€è§†é¢‘æµçº¢åŒ…
^https:\/\/api\.weibo\.cn\/2\/search\/container_discover\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/hot\/hours_spotlight\? reject-dict
^https:\/\/api\.weibo\.cn\/2\/video\/redpacket\? reject-dict
^https:\/\/api\.weibo\.cn\/!\/(?:sug\/list\/finderchange|was\/finder\/searchbarchange)\? reject-dict

# å¼€å±å¹¿å‘Š //*.uve.weibo.com
^https:\/\/bootrealtime\.uve\.weibo\.com\/v\d\/ad\/(?:realtime|preload) reject-dict
^https:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/(?:get-lbs-cell-info\.php|sdkconfig\.php) reject-dict

# å¾®åšé•¿æ–‡ç« æ¨å¹¿
^https:\/\/card\.weibo\.com\/article\/m\/aj\/(?:reward|uvead) reject-dict
^https:\/\/weibo\.com\/ttarticle\/x\/m\/aj\/(?:reward|uvead) reject-dict

[Script]
# é¦–é¡µ - ç­¾åˆ°ã€å‘å¸ƒæŒ‰é’®ã€ä¾§è¾¹æ ã€å³ä¸Šè§’çº¢åŒ…ã€é¡¶éƒ¨æ ‡ç­¾é¡µã€ä¾§è¾¹æ æé†’ã€è¶…è¯æ ‡ç­¾é¡µæ‚¬æµ®ã€é¡¶éƒ¨ç›´æ’­
http-response ^https:\/\/api\.weibo\.cn\/2\/(?:checkin\/show|client\/publisher_list|push\/active) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤é¦–é¡µæ¨å¹¿
http-response ^https:\/\/api\.weibo\.cn\/2\/groups\/allgroups\/v2\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤é¦–é¡µé¡¶éƒ¨æ ‡ç­¾

# è¯¦æƒ…é¡µ - è¶…è¯ã€è¯„è®ºåŒºã€çœ‹å›¾ç•Œé¢ã€ä¸ªäººä¸»é¡µã€æˆ‘çš„é¡µé¢ã€ä¿¡æ¯æµã€å•†å“æ©±çª—ã€è§†é¢‘æµã€è§†é¢‘å·ã€è§†é¢‘è°ƒæŸ¥ã€è¯é¢˜å¡ç‰‡
http-response ^https:\/\/api\.weibo\.cn\/2\/(?:cardlist|page) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤ä¿¡æ¯æµå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/comments\/build_comments\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤è¯„è®ºåŒºå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/(?:container\/asyn|flowlist|flowpage) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤ä¸ªäººå¾®åšè¯¦æƒ…é¡µå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/friendships\/(?:create|destroy) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å…³æ³¨ã€å–æ¶ˆå…³æ³¨å¼¹çª—
http-response ^https:\/\/api\.weibo\.cn\/2\/profile\/(?:container_timeline|dealatt|me|statuses\/tab|userinfo) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤ä¸ªäººä¸»é¡µå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/statuses\/(?:container_timeline(?:_hot|_topic|_topicpage|_unread)?|repost_timeline|unread_hot_timeline) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤ä¿¡æ¯æµå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/statuses\/(?:extend|show) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å¾®åšè¯¦æƒ…é¡µå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/video\/tiny_stream_video_list\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤è§†é¢‘æµå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/!\/huati\/discovery_home_bottom_channels\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤è¶…è¯é¡¶éƒ¨æ ‡ç­¾

# æ¶ˆæ¯é¡µ
http-response ^https:\/\/api\.weibo\.cn\/2\/direct_messages\/user_list\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤æ¶ˆæ¯é¡µåˆ—è¡¨å¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/messageflow\/notice\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤æ¶ˆæ¯é¡µæé†’

# å‘ç°é¡µ - çƒ­é—¨å¾®åšä¿¡æ¯æµã€æœç´¢åˆ—è¡¨ã€çƒ­æœæé†’ã€çŒœä½ æƒ³æœã€è§†é¢‘æµçº¢åŒ…
http-response ^https:\/\/api\.weibo\.cn\/2\/search\/(?:container_timeline|finder) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤çƒ­é—¨å¾®åšä¿¡æ¯æµå¹¿å‘Š
http-response ^https:\/\/api\.weibo\.cn\/2\/searchall\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å‘ç°é¡µæœç´¢ç»“æœå¹¿å‘Š

# å¼€å±å¹¿å‘Š //*.uve.weibo.com
http-response ^https:\/\/bootpreload\.uve\.weibo\.com\/v[12]\/ad\/preload script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å¼€å±å¹¿å‘Š preload
http-response ^https:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/sdkad\.php script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å¼€å±å¹¿å‘Š sdkad
http-response ^https:\/\/wbapp\.uve\.weibo\.com\/(?:preload\/get_ad|wbapplua\/wbpullad\.lua) script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ç§»é™¤å¼€å±å¹¿å‘Š wbapplua

# ä¼šå‘˜å›¾æ ‡
http-response ^https:\/\/new\.vip\.weibo\.cn\/aj\/appicon\/list\? script-path = https://kelee.one/Resource/Script/Weibo/Weibo_remove_ads.js, requires-body = true, tag = ä¼šå‘˜å›¾æ ‡

[MitM]
hostname = *.weibo.cn, *.weibo.com, weibo.com