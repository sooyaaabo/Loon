#!name = é—²é±¼
#!desc = è¿‡æ»¤é—²é±¼å¹¿å‘Š
#!openUrl = https://apps.apple.com/app/id510909506
#!author = RuCu6[https://github.com/RuCu6], ZenmoFeiShi[https://github.com/ZenmoFeiShi], kelv1n1n[https://github.com/kelv1n1n], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/Goofish.png
#!date = 2025-12-16 20:00

# 2025-12-05 03:29:31
# https://kelee.one/Tool/Loon/Lpx/FleaMarket_remove_ads.lpx
# 2025-12-04
# https://klraw.pages.dev/kelv1n1n/script/main/rewrite/goofish.snippet?token=209863

[Rule]
DOMAIN-SUFFIX, iyes.youku.com, REJECT

# æ‹¦æˆªå¹¿å‘Šä¸‹å‘
AND, ((URL-REGEX, "^http:\/\/.+\/amdc\/mobileDispatch"), (USER-AGENT, "%E9%97%B2%E9%B1%BC*")), REJECT

[Rewrite]
# å¼€å±å¹¿å‘Š
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlecommerce\.splash\.ads\/ reject-dict

# é¦–é¡µ - é¡¶éƒ¨æ¨ªå¹…å°éƒ¨ä»¶ã€é¡¶éƒ¨ - æ¨è - ä¿¡æ¯æµå¹¿å‘Š
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.nextfresh\/ response-body-json-jq '.data.homeTopList |= map(select(.sectionType == "kingkongDo")) | .data.sections |= map(select(.data.clickParam.args.cardType as $ct | $ct != "homeMultiBanner" and $ct != "mamaAD")) | .data.sections |= map(select((.template.name|type=="string")and(.template.name=="idlefish_home_new_commodity_card"or(.template.name|contains("fish_home_tags_item_card")))))'

# é¦–é¡µ - æ–°ç‰ˆé¦–é¡µé¡¶éƒ¨å°éƒ¨ä»¶
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.home\.whale\.modulet\/ response-body-json-jq '.data.container.sections |= map(select(.template.name == "fish_home_miniapp"))'

# é¦–é¡µ - å·¦ä¸Šè§’ç­¾åˆ°ã€å³ä¸‹è§’æ‚¬æµ®å¹¿å‘Šã€åº•æ åŠ¨æ€å‘å¸ƒçƒã€åº•æ åŒåŸæ ‡ç­¾çº¢ç‚¹
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.user\.strategy\.list\/ reject-dict

# é¦–é¡µ - é¡¶éƒ¨å›¾æ ‡èœå•
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.widget\.refresh\.get response-body-json-jq '.data.homeTopList = []'

# å•†å“è¯¦æƒ… - ä¸ºä½ æ¨è
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.fun\.follow\.feed\.list\/ response-body-json-jq '.data.sections|=map(select(.cardType==2001))'

^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.community\/ response-body-json-jq '.data.feedsList |= map(select(.template.name == "idlefish_home_new_commodity_card" or .template.name == "idlefish_home_new_content_card"))'

^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.item\.recommend\.list\/ reject-dict

# é¡¶éƒ¨ - æ–°å‘ - ä¿¡æ¯æµå¹¿å‘Š
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.newitem\.page\/ response-body-json-jq '.data.sections |= map(select(.data.clickParam.args.cardType as $ct | $ct != "banner" and $ct != "mamaAD"))'

# æœ¬åœ° - å³ä¸Šè§’é™„è¿‘æç¤º
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.near\.by\.corner\.info\/ reject-dict

# æœ¬åœ° - å¹¿å‘Šæ¨ªå¹…
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.flow\.plat\.section\/ response-body-json-jq '.data.data.components |= map(select(.data and (.data|type=="object") and .data.template and (.data.template|type=="object") and .data.template.name and (.data.template.name|type=="string") and (.data.template.name|contains("fish_city_kingkong"))))'

# æœ¬åœ° - å¹¿å‘Šæ¨ªå¹…åŠé™„è¿‘ä¼˜æƒ 
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.home\.top\/ response-body-json-jq '.data.data.components |= map(select(.key == "fish_home_second_stage_top_cardV3"))'

# æœ¬åœ° - ä¿¡æ¯æµå¹¿å‘Š
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.home\/ response-body-json-jq '.data.sections |= map(select((.template.cardEnum != "ads") and (.cardType == "common")))'

# æˆ‘çš„é¡µé¢ - é¡¶éƒ¨æç¤ºã€å¡ç‰‡æ¨å¹¿ã€æ¨ªå¹…å¹¿å‘Šã€å€Ÿé’±å…¥å£
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.idle\.user\.page\.my\.adapter\/ response-body-json-jq '.data.container.sections |= map(select(.template.name as $name | ["my_fy25_header","my_fy25_user_info","my_fy25_trade","my_fy25_appraise","my_fy25_tools"] | index($name))) | .data.container.sections |= map(.item |= (if .level and .level.exContent and (.level.exContent | has("tips")) then del(.level) else . end))'

^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.idle\.user\.page\.my\.adapter\/ response-body-json-jq jq-path="https://kelee.one/Resource/JQLang/FleaMarket/adapter_FleaMarket_remove_ads.jq"

# æˆ‘çš„é¡µé¢ - å•†å“æ¨å¹¿
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.item\.buy\.feeds\/ reject-dict

# æœç´¢å¡«å……è¯
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\.shade\/ reject-dict

# é¡¶éƒ¨æ ‡ç­¾å›¾æ ‡
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.circle\.list\/ response-body-json-jq '.data.circleList[].showInfo.titleImage |= (.lightUrl = "" | .url = "" | del(.width, .height))'

# æœç´¢ç»“æœå¹¿å‘Š
^https:\/\/g-acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\/ response-body-json-jq '.data.resultList |= map(if .data.item.main.exContent.dislikeFeedback.clickParam.args.bizType == "ad" then empty else . end)'

# æœç´¢ç»“æœé¡µé¢çš„çº¢åŒ…æ¨ªå¹…
^https:\/\/g-acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\/ response-body-json-del data.resultPrefixBar

# æœç´¢é¡µé¢ - æœç´¢è¯æ¨å¹¿ã€é—²é±¼è¡Œæƒ…çƒ­ç‚¹
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\.discover\/ response-body-json-jq '.data.resultList |= map(select(.type != "MarketHotSpot"))'

^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.item\.search\.activate\/ response-body-json-jq '.data.cardList |= map(if has("cardData") and (.cardData | has("hotwords")) then .cardData |= del(.hotwords) else . end)'

# æœç´¢é¡µé¢ - æ¦œå•
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\.activate\.tablist response-body-json-jq '.data.tabList = []'

# æ¶ˆæ¯åˆ—è¡¨æ¨å¹¿
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.playboy\.recommend\/ reject-dict

^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.trade\.full\.info\/ response-body-json-jq '.data.components |= map(select(.render | . == "orderStatusVO" or . == "addressInfoVO" or . == "orderInfoVO"))'

# è¿™äº›å®è´è¶…å¥½å–
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.item\.resell\.recommendorhotcate\/ reject-dict

# ç”¨é—²é±¼å¸ä¹°æ›´ä¾¿å®œ
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.idle\.coin\.nextfresh\/ reject-dict

# å…³æ³¨çš„äººé¡µé¢åœˆå­æ¨ªå¹…
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.group\.myself\.banner\/ response-body-json-jq '.data.bannerList = []'

# é¦–é¡µå…³æ³¨é¢‘é“å¸¸è®¿é—®çš„åœˆå­
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.fun\.follow\.often\.visit\/ response-body-json-jq '.data.sections = []'

# ä¸»é¡µå…³æ³¨é¡µé¢åœˆå­æ–°æ¨ªå¹…
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.circle\.myself\.banner\/ response-body-json-jq '.data.bannerList = []'

# ä¸»é¡µå…³æ³¨é¡µé¢åœˆå­å¸¸è®¿é—®
^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.circle\.visited\/ response-body-json-jq '.data.visitedCircleList = []'

[Script]
# å•†å“ä¿¡æ¯æµå¹¿å‘Š
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.nextfresh\/ script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]å•†å“ä¿¡æ¯æµå¹¿å‘Š

# å®šä½åœ°åŒºé¡µé¢çš„ä¿¡æ¯æµå¹¿å‘Š
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.home\/ script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]å®šä½åœ°åŒºé¡µé¢çš„ä¿¡æ¯æµå¹¿å‘Š

# ä¸ªäººä¸»é¡µ
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.idle\.user\.page\.my\.adapter\/ script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]ä¸ªäººä¸»é¡µ

# é¦–é¡µé¡¶éƒ¨é¢‘é“èœå•
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlehome\.home\.circle\.list\/1\.0 script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]é¦–é¡µé¡¶éƒ¨é¢‘é“èœå•

# å•†å“è¯¦æƒ…é¡µå‘¨è¾¹æ¨è
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.nearby\.itemdetail\.enter\/1\.0 script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]å•†å“è¯¦æƒ…é¡µå‘¨è¾¹æ¨è

# æœç´¢ç»“æœä¿¡æ¯æµå¹¿å‘Š
# http-response ^https:\/\/g-acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idlemtopsearch\.search\/ script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]æœç´¢ç»“æœä¿¡æ¯æµå¹¿å‘Š

# åŒåŸé¡µæ¨ªå¹…å¹¿å‘Š
# http-response ^https:\/\/acs\.m\.goofish\.com\/gw\/mtop\.taobao\.idle\.local\.flow\.plat\.section script-path = https://klraw.pages.dev/kelv1n1n/script/main/js/goofish.js?token=209863, requires-body = true, tag = [é—²é±¼]åŒåŸé¡µæ¨ªå¹…å¹¿å‘Š

[MitM]
hostname = acs.m.goofish.com, g-acs.m.goofish.com