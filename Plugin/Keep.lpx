#!name = Keep
#!desc = è¿‡æ»¤Keepå¹¿å‘Š
#!openUrl = https://apps.apple.com/app/id952694580
#!author = å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md], ZenmoFeiShi[https://github.com/ZenmoFeiShi]
#!tag = å»å¹¿å‘Š
#!system = 
#!system_version = 
#!loon_version = 3.3.7(921)
#!homepage = https://github.com/sooyaaabo/Loon/blob/main/README.md
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/Keep.png
#!date = 2025-12-16 20:00

# 2025-09-18 15:59:53
# https://kelee.one/Tool/Loon/Lpx/Keep_remove_ads.lpx
# 2025-07-19
# https://raw.githubusercontent.com/ZenmoFeiShi/Qx/main/Keep.snippet

[Rule]
# ä¿¡æ¯æµå¹¿å‘Š
DOMAIN, kad.gotokeep.com, REJECT
DOMAIN, hc-ssp.sm.cn, REJECT
DOMAIN, httpdns.calorietech.com, REJECT

[Rewrite]
# ç²¾ç®€é…ç½®
^https:\/\/api\.gotokeep\.com\/op-engine-webapp\/v1\/configs$ response-body-json-del data.adTimeoutReport data.spotShowReport data.adSupplementIntervalMinutes data.adSupplementSwitch data.hotFeedSpotAdRequestMoment data.activityBrandFeedSpotAdRequestMoment data.searchFeedSpotAdRequestMoment data.feedDetailSpotAdRequestMoment data.homePageFeedSpotAdRequestMoment data.followFeedSpotAdRequestMoment data.hotFeedRecommendSpotAdRequestMoment data.activityFeedSpotAdRequestMoment data.hotFeedFindSpotAdRequestMoment data.hotFeedSpotFixedPositionSecond data.searchFeedSpotFixedPositionSecond data.followFeedSpotFixedPositionSecond data.activityFeedSpotFixedPositionSecond data.searchFeedSpotFixedPositionThird data.hotFeedFindSpotFixedPositionSecond data.hotFeedFindSpotFixedPositionThird data.activityFeedSpotFixedPositionInitial data.activityFeedSpotFixedPositionThird data.hotFeedDynamicSpotPosition data.feedDetailDynamicSpotPosition data.hotFeedRecommendDynamicSpotPosition data.hotFeedFindDynamicSpotPosition data.homePageFeedDynamicSpotPosition data.followFeedDynamicSpotPosition data.searchFeedSpotPositionDynamic data.activityFeedSpotPositionDynamic data.activityBrandFeedSpotPositionDynamic data.splashAdLoadTimeLimit data.courseAdLoadTimeLimit data.feedAdLoadTimeLimit data.aliHCSpotConfig data.gdtSpotConfig data.pugcThresholdPercent data.pugcStepMinSeconds data.pugcStepMaxSeconds data.pugcPreLoadEarlySeconds data.pugcLoadPostPreRolls data.closeConfirmButtonText

# å¼€å±å¹¿å‘Š
^https:\/\/api\.gotokeep\.com\/op-engine-webapp\/v1\/ad\/ reject-dict

# æœç´¢å¡«å……è¯
^https:\/\/api\.gotokeep\.com\/search\/v6\/default\/keyword\/list\? reject-dict

# å…³æ³¨ - å…³æ³¨æ¨è
^https:\/\/api\.gotokeep\.com\/twins\/v4\/feed\/followPage\? reject-dict

# é¦–é¡µ - æ¨è - è¯¾ç¨‹æ¨èAdd commentMore actions
^https:\/\/api\.gotokeep\.com\/twins\/union\/feed\/union_feed_all$ response-body-json-jq '.data.modules |= map(select(.code == "unionFeedEntry"))'
^https:\/\/api\.gotokeep\.com\/twins\/union\/feed\/function\? reject-dict

# æ–‡ç« ç›¸å…³æ¨è
^https:\/\/api\.gotokeep\.com\/twins\/v4\/feed\/entryDetail\? response-body-json-replace data {}

# å¼¹çª—
^https:\/\/api\.gotokeep\.com\/guide-webapp\/v1\/popup\/getPopUp\? reject-dict

# ç²¾ç®€åº•æ å’Œé¦–é¡µé¡¶éƒ¨æ ‡ç­¾ - åº•æ å…¥å£ä»…ä¿é¦–é¡µã€è¿åŠ¨å’Œæˆ‘çš„ã€é¦–é¡µï¼Œé¡¶éƒ¨æ ‡ç­¾ä»…ä¿ç•™ç¤¾åŒºã€æ¨èã€è¯¾ç¨‹ã€è®¡åˆ’ã€è·¯çº¿
^https:\/\/api\.gotokeep\.com\/config\/v3\/basic\? response-body-json-jq '.data.bottomBarControl.tabs |= map(select(.tabType | . == "home" or . == "schedule" or . == "dynamic_sports" or . == "personal")) | .data.homeTabs |= map(select(.type | . == "socialTab" or . == "union_feed_all" or . == "homeRecommend" or . == "suitTab" or . == "union_feed_route"))'

# æœç´¢ - æ¦œå•
^https:\/\/api\.gotokeep\.com\/search\/v5\/hotCourse\/list$ reject-dict

# æœç´¢ - çƒ­é—¨è¯é¢˜
^https:\/\/api\.gotokeep\.com\/search\/v4\/hotHashtag\/list$ reject-dict

# æœç´¢ - çƒ­æœæ¨èè¯
^https:\/\/api\.gotokeep\.com\/search\/v4\/hotword\/list\? reject-dict

^https:\/\/api\.gotokeep\.com\/pencil-webapp\/play\/v1\/games\? response-body-json-jq '.data.games[].microGames[] |= if .leftIcon? and .leftIcon.type == "aiMode" then del(.leftIcon) else . end'

[Script]
# ç§»é™¤æˆ‘çš„é¡µé¢å¹¿å‘Š
http-response ^https:\/\/api\.gotokeep\.com\/athena\/v\d\/people\/my script-path = https://raw.githubusercontent.com/ZenmoFeiShi/Qx/main/Keep.js, requires-body = true, tag = [Keep]ç§»é™¤æˆ‘çš„é¡µé¢å¹¿å‘Š

# ç§»é™¤é¦–é¡µæ´»åŠ¨æ ‡ç­¾
http-response ^https:\/\/api\.gotokeep\.com\/config\/v\d\/basic script-path = https://raw.githubusercontent.com/ZenmoFeiShi/Qx/main/Keep.js, requires-body = true, tag = [Keep]ç§»é™¤é¦–é¡µæ´»åŠ¨æ ‡ç­¾

[MitM]
hostname = api.gotokeep.com