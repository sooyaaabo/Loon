#!name = YouTube
#!desc = ç§»é™¤YouTubeè§†é¢‘ã€ç€‘å¸ƒæµã€æœç´¢å’ŒShortsä¸­çš„å¹¿å‘Šï¼Œç§»é™¤åº•éƒ¨çš„ä¸Šä¼ æŒ‰é’®ï¼Œå¢åŠ ç”»ä¸­ç”»åŠè§£é”æ›´å¤šçš„å­—å¹•åœ°åŒºåŠŸèƒ½ã€‚ç§»é™¤YouTube Musicåº•éƒ¨çš„ä¸Šä¼ ã€é€‰æ®µå’Œå‡çº§æŒ‰é’®ï¼Œæ”¯æŒäºŒè€…çš„åå°æ’­æ”¾ï¼Œä¸èƒ½ä¸å…¶ä»–å…·æœ‰YouTubeå¹¿å‘Šè¿‡æ»¤èƒ½åŠ›çš„æ’ä»¶ä¸€èµ·ä½¿ç”¨ã€‚æ­¤æ’ä»¶éœ€è¦Loonç‰ˆæœ¬ä¸º3.1.7(677)åŠä»¥ä¸Šï¼Œä¸”éœ€è¦å¯ç”¨QUICå›é€€ä¿æŠ¤ã€‚æ”¯æŒPremiumè®¢é˜…ç”¨æˆ·ä½¿ç”¨ï¼Œä¸æ”¯æŒtvOSè®¾å¤‡ã€‚
#!openUrl = 
#!author = @RuCu6 @Maasea @VirgilClyne @å¯è‰ğŸ…¥
#!homepage = https://github.com/sooyaaabo/Loon
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/icons/YouTube.png
#!select = éšè—ä¸Šä¼ æŒ‰é’®, true, false
#!select = éšè—é€‰æ®µæŒ‰é’®, true, false
#!select = å­—å¹•ç¿»è¯‘è¯­è¨€, zh-Hans, ja, ko, en
#!select = æ­Œè¯ç¿»è¯‘è¯­è¨€, zh-Hans, ja, ko, en
#!select = å¯ç”¨è°ƒè¯•æ¨¡å¼, true, false
#!select = è‡ªåŠ¨æ˜¾ç¤ºç¿»è¯‘å­—å¹•, æ˜¯, å¦
#!select = ä»…è¾“å‡ºå­—å¹•è¯‘æ–‡, æ˜¯, å¦
#!select = å­—å¹•è¯‘æ–‡çš„ä½ç½®, è¯‘æ–‡ä½äºåŸæ–‡ä¹‹ä¸Š, è¯‘æ–‡ä½äºåŸæ–‡ä¹‹ä¸‹
#!date = 2024-04-05 18:30

# 2024-03-10 13:45
# https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/youtube.snippet
# 2024-03-11
# https://github.com/DualSubs/YouTube/blob/main/modules/DualSubs.YouTube.plugin
# 2024-04-05 17:44:52
# https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/YouTube_remove_ads.plugin

[Rule]
AND, ((DOMAIN-SUFFIX, googlevideo.com), (PROTOCOL,QUIC)), REJECT
AND, ((DOMAIN, youtubei.googleapis.com), (PROTOCOL,QUIC)), REJECT

[Rewrite]
# ä½¿ç”¨reject-200æ–¹æ³•ä»¥å‡å°‘å¼€é”€
^https:\/\/redirector\.googlevideo\.com\/initplayback\? reject-dict

[Script]
# YouTubeå»å¹¿å‘Š - æ¥è‡ªMaaseaçš„ä½œå“
http-request ^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|reel\/reel_watch_sequence) script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/youtube/request.js, requires-body = true, binary-body-mode = true, tag = YouTubeè¯·æ±‚
http-response ^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting) script-path = https://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/youtube/response.js, requires-body = true, binary-body-mode = true, tag = YouTubeå“åº”

# YouTubeå­—å¹•ç¿»è¯‘
http-request ^https?:\/\/(www|m|tv)\.youtube\.com\/youtubei\/v1\/player script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.request.js, requires-body = true, tag = JSONÂ·YouTubeæ’­æ”¾å™¨è¯·æ±‚, argument = 
http-response ^https?:\/\/(www|m|tv)\.youtube\.com\/youtubei\/v1\/player script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.response.js, requires-body = true, tag = JSONÂ·YouTubeæ’­æ”¾å™¨å“åº”, argument = 
http-request ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/player script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.request.js, requires-body = true, binary-body-mode = true, tag = ProtoÂ·YouTubeæ’­æ”¾å™¨è¯·æ±‚, argument = 
http-response ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/player script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.response.js, requires-body = true, binary-body-mode = true, tag = ProtoÂ·YouTubeæ’­æ”¾å™¨å“åº”, argument = 
http-request ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.request.js, requires-body = false, tag = YouTubeå®šæ—¶æ–‡æœ¬è¯·æ±‚, argument = 
http-response ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext\?(.*)subtype=(Official|External) script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Composite.Subtitles.response.js, requires-body = true, tag = YouTubeåˆæˆå®šæ—¶æ–‡æœ¬å“åº”, argument = 
http-response ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext\?(.*)subtype=Translate script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body = true, tag = YouTubeç¿»è¯‘å®šæ—¶æ–‡æœ¬å“åº”, argument = 

# YouTube Musicå­—å¹•ç¿»è¯‘
http-request ^https?:\/\/music\.youtube\.com\/youtubei\/v1\/browse script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.request.js, requires-body = true, tag = JSONÂ·YouTube Musicæµè§ˆè¯·æ±‚, argument = 
http-request ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/browse script-path = https://raw.githubusercontent.com/DualSubs/YouTube/main/js/YouTube.request.js, requires-body = true, binary-body-mode = true, tag = ProtoÂ·YouTube Musicæµè§ˆè¯·æ±‚, argument = 
http-response ^https?:\/\/music\.youtube\.com\/youtubei\/v1\/browse\?(.*)subtype=Translate script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body = true, tag = JSONÂ·YouTube Musicç¿»è¯‘æ­Œè¯å“åº”, argument = 
http-response ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/browse\?(.*)subtype=Translate script-path = https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body = true, binary-body-mode = true, tag = ProtoÂ·YouTube Musicç¿»è¯‘æ­Œè¯å“åº”, argument = 

[Mitm]
hostname = www.youtube.com, m.youtube.com, tv.youtube.com, music.youtube.com, youtubei.googleapis.com, redirector.googlevideo.com
