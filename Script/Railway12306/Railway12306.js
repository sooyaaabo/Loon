// Built at: 2025/12/6 09:53:02
var m=e=>async(t,r)=>{let o=n=>async()=>{let s=n===e.length?r:e[n];if(s)return await s(t,o(n+1))};return o(0)()};function R(e){return typeof e!="object"||e===null?String(e):e instanceof Error&&e.cause?`${e.toString()} { [cause]: ${R(e.cause)} }`:Array.isArray(e)?JSON.stringify(e):typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():JSON.stringify(e)}var O=(s=>(s[s.DEBUG=1]="DEBUG",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.OFF=5]="OFF",s))(O||{}),p=class{static level=4;static setLevel(t){this.level=Number(t)||O[t.toUpperCase()]||4}static log(...t){console.log(t.map(r=>R(r)).join(" "))}static debug(...t){this.level>1||this.log("[DEBUG]",...t)}static info(...t){this.level>2||this.log("[INFO]",...t)}static warn(...t){this.level>3||this.log("[WARN]",...t)}static error(...t){this.level>4||this.log("[ERROR]",...t)}};var y=class e{static getInstance(){return e.instance||(e.instance=e.createInstance()),e.instance}static createInstance(){if(typeof $loon<"u")return new x;if(typeof $task<"u")throw new Error("QuantumultX is not supported");return new h}static instance;request;response;argument={};state={};#t;get url(){return this.#t||(this.#t=new URL(this.request.url)),this.#t}get path(){return this.url.pathname}constructor(){this.request=this.createRequest(typeof $request<"u"?$request:null),this.response=this.createResponse(typeof $response<"u"?$response:null)}getJSON(t){let r=this.getVal(t);return r?JSON.parse(r):null}setJSON(t,r){this.setVal(JSON.stringify(t),r)}exit(){$done({})}},h=class extends y{createRequest(t){return Object.create(t,{bodyBytes:{get(){return this.body},set(r){this.body=r}}})}createResponse(t){return Object.create(t,{bodyBytes:{get(){return this.body},set(r){this.body=r}}})}initArgument(t){if(Object.assign(this.argument,t),typeof $argument=="string")try{Object.assign(this.argument,JSON.parse($argument))}catch(r){p.log(r)}}getVal(t){return $persistentStore.read(t)}setVal(t,r){return $persistentStore.write(t,r)}fetch(t){let{method:r,body:o,timeout:n=5,...s}=t;return new Promise((i,u)=>{$httpClient[r.toLowerCase()]({...s,body:o,"binary-mode":o instanceof Uint8Array,timeout:n},(a,c,d)=>{if(a)return u(a);i(this.createResponse({...c,body:d}))})})}notify(t="",r="",o="",n={}){let{openUrl:s,clipboard:i,mediaUrl:u,dismiss:a,sound:c=!0}=n,d={url:s,text:i,"media-url":u,"auto-dismiss":a,sound:c};s?d.action="open-url":i&&(d.action="clipboard"),$notification.post(t,r,o,d)}done(t){$done({...t})}abort(){$done({abort:!0})}},x=class extends h{initArgument(t){super.initArgument(t),typeof $argument=="object"&&Object.assign(this.argument,$argument)}fetch(t){return t.timeout=(t.timeout??5)*1e3,t.alpn="h2",super.fetch(t)}notify(t="",r="",o="",n={}){let{openUrl:s,mediaUrl:i,clipboard:u,delay:a}=n,c={openUrl:s,mediaUrl:i,clipboard:u};$notification.post(t,r,o,c,a)}abort(){$done()}};var l=y.getInstance();var g=class{middleware=[];use(t){return this.middleware.push(t),this}run(){m(this.middleware)(l).catch(t=>p.error(t,l.request.method,l.request.url)).finally(()=>l.exit())}};var f=class{path;stack;constructor(t,r){this.path=t,this.stack=r}};var S=(e,t)=>t.path===e.path,v=(e,t)=>t.request.url.endsWith(e.path);var b=class{stack=[];matchPath;constructor(t={}){this.matchPath=t.matchPath||S}use(...t){return this.register("",t)}add(t,...r){return this.register(t,r)}routes(){return(t,r)=>{let o=this.match(t);if(o.length===0)return r();let n=o.flatMap(s=>s.stack);return m(n)(t,r)}}match(t){return this.stack.filter(r=>r.path===""||this.matchPath(r,t))}register(t,r){if(Array.isArray(t))for(let o of t)this.stack.push(new f(o,r));else this.stack.push(new f(t,r));return this}};var P=async(e,t)=>{await t(),e.done({response:e.response})};var w=new b({matchPath:v});w.add("/getAdList",P,e=>{let t=o=>o==="0007"?'{"materialsList":[{"billMaterialsId":"1","filePath":"#","creativeType":1}],"advertParam":{"skipTime":1}}':o==="G0054"?'{"code":"00","materialsList":[{}]}':'{"code":"00","message":"0"}',r=JSON.parse(e.request.body);e.response.body=t(r.placementNo)});w.add("/mgw.htm",e=>{let t=["com.cars.otsmobile.newHomePageBussData"],r=e.request.headers,o=r["operation-type"]||r["Operation-Type"];t.includes(o)?e.abort():e.exit()});var $=w;var q=new g;q.use($.routes());var M=q;M.run();
